var documenterSearchIndex = {"docs":
[{"location":"experiments/airfields.html#Airfields-for-flight-experiments","page":"Airfields","title":"Airfields for flight experiments","text":"","category":"section"},{"location":"experiments/airfields.html","page":"Airfields","title":"Airfields","text":"Official airfields. Are not used, because flying is allowed everywhere. But for presentations possibly suitable.","category":"page"},{"location":"experiments/airfields.html#Unering","page":"Airfields","title":"Unering","text":"","category":"section"},{"location":"experiments/airfields.html","page":"Airfields","title":"Airfields","text":"Linderbergweg 1, 82229 Seefeld, Germany Konstantin Kondak knows the mayor who gave his approval here. (Image: unering) (Image: unering ICAO)","category":"page"},{"location":"experiments/airfields.html","page":"Airfields","title":"Airfields","text":"Maps: Digitale Plattform Unbemannte Luftfahrt or ICAO Maps ","category":"page"},{"location":"experiments/airfields.html","page":"Airfields","title":"Airfields","text":"danger: Airspace D\nFor entry into airspace D, it is mandatory to receive an entry permit by radio. Since airspace D begins here at GND, UAV flight is only possible under NfL 2021-1-2248","category":"page"},{"location":"vtol_parameter_optimisation.html#Vtol-Parameter-Optimisation","page":"VTOL Model Parameter Optimisation","title":"Vtol Parameter Optimisation","text":"","category":"section"},{"location":"vtol_parameter_optimisation.html#Functions","page":"VTOL Model Parameter Optimisation","title":"Functions","text":"","category":"section"},{"location":"vtol_parameter_optimisation.html","page":"VTOL Model Parameter Optimisation","title":"VTOL Model Parameter Optimisation","text":"Modules = [VtolParameterOptimisation]\nOrder   = [:function, :type]","category":"page"},{"location":"vtol_parameter_optimisation.html#Main.VtolParameterOptimisation.clipping_loss-Tuple{Real, Real, Real}","page":"VTOL Model Parameter Optimisation","title":"Main.VtolParameterOptimisation.clipping_loss","text":"clipping_loss(x::Real, min::Real, max::Real; offset::Real=100.0)\n\nReturns a quadratic loss at the distance from the minimum or maximum value when the clipping limits are exceeded. An additional offset is added to clearly separate the loss from the rest of the optimisation.\n\n\n\n\n\n","category":"method"},{"location":"vtol_parameter_optimisation.html#Main.VtolParameterOptimisation.quadratic_prior_loss-Tuple{Real, Real, Real}","page":"VTOL Model Parameter Optimisation","title":"Main.VtolParameterOptimisation.quadratic_prior_loss","text":"quadratic_prior_loss(x::Real, μ::Real, σ::Real)\n\nReturns the squared loss of the value x from the prior μ with the scaling σ. Can be used in the optimisation of an unknown loss landscape to always guarantee a gradient.\n\n\n\n\n\n","category":"method"},{"location":"experiments/flight_laws.html#Gesetze-zum-Fliegen","page":"Flight laws DE","title":"Gesetze zum Fliegen","text":"","category":"section"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Der EU Befähigungsnachweis A1 / A3 (25€) ist unbedingt erforderlich, um unsere Drohnen zu fliegen. Das Fernpiloten-Zeugnis ist rechtlich nicht nötig.","category":"page"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Außerdem muss eine Haftpflichtversicherung abgeschlossen sein, in welcher durch das unbemannte Luftfahrzeug verursachte Schäden für mindestens 750 000 Rechnungseinheiten abgedeckt sind. Ist der UAS-Betreiber (e-ID auf der Drohne) und Fernpilot nicht dieselbe Person, muss speziell geprüft werden, ob der Versicherungsschutz besteht. Viele Privathaftpflichtversicherungen decken nur Drohnen bis 250 g.","category":"page"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"info: THD Versicherung\nWir sind über die THD Versichert. Ansprechpartner: ivian.kuscheff@th-deg.de ","category":"page"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Da die Drohnen mehr als 900 g wiegen, finden die Flüge in der Unterkategorie A3 statt, so wie in der UAS (Unmanned Aircraft System) Klasse C4, da es sich um einen Eigenbau handelt, dem wichtige Sicherheitsmerkmale fehlen.","category":"page"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Der Mindestabstand zu Industrie-, Wohn-, Erholungs- und Freizeitgebieten sowie zu Menschenansammlungen muss stets 150 m betragen.\nEs muss sichergestellt sein, dass im gesamten Betriebsbereich keine unbeteiligten Personen zu erwarten sind. Es muss ein Sicherheitsabstand von mehr als 30 m, keinesfalls weniger als die 1:1-Regel (1 m Abstand für 1 m Höhe) und mindestens die vom UAS in 2 Sekunden zurückgelegte Strecke, zu unbeteiligten Einzelpersonen gewährleistet sein.\nDie maximale Höhe über dem Boden beträgt 120 m.\nEs sind nur Flüge mit Sichtverbindung (VLOS) erlaubt.","category":"page"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"(Image: Offene Kategorie A3 Regeln)","category":"page"},{"location":"experiments/flight_laws.html#UAS-Betreibernummer-(e-ID)","page":"Flight laws DE","title":"UAS-Betreibernummer (e-ID)","text":"","category":"section"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Auf jeder Drohne muss eine UAS-Betreibernummer (e-ID) angebracht sein, welche man durch die Registrierung bei der zuständigen Behörde erhält. 20€ für eine natürliche Person 50€ für eine Juristische Person. Wenn bereits eine UAS-Betreiberregistrierung einer juristischen Person vorhanden ist oder eine andere natürliche Person als UAS-Betreiber auftrit, dessen e-ID am UAS angebracht ist, übernimmt der aktuelle Pilot nur die Funktion des Fernpiloten und nicht des UAS-Betreibers. Eine erneute Registrierung ist nicht nötig.","category":"page"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"danger: e-ID Drohne\nAuf der VTOL 3 Drohne (Brett) ist keine e-ID, sondern eine persönliche Identifikationsnummer eines EU-Kompetenznachweises für Fernpiloten angebracht (vermutlich von sven.schmid@elektra-uas.de)! Die e-ID hat ivian.kuscheff@th-deg.de. Diese sollte irgendwann auch auf der Drohne angebracht werden.","category":"page"},{"location":"experiments/flight_laws.html#Flugrestriktionen","page":"Flight laws DE","title":"Flugrestriktionen","text":"","category":"section"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Informationen zu Flugrestriktionen können über die Digitale Plattform Unbemannte Luftfahrt oder über die Droniq App abgefragt werden. Die ICAO Karten könne über den DFS abgerufen werden.","category":"page"},{"location":"experiments/flight_laws.html#Anträge-and-Behördendienste","page":"Flight laws DE","title":"Anträge & Behördendienste","text":"","category":"section"},{"location":"experiments/flight_laws.html","page":"Flight laws DE","title":"Flight laws DE","text":"Sämtliche Anträge und Behördendienste können bei der DIPUL (Digitale Plattform Unbemannte Luftfahrt) gefunden werden.","category":"page"},{"location":"visualization.html#Visualization","page":"Visualization","title":"Visualization","text":"","category":"section"},{"location":"visualization.html","page":"Visualization","title":"Visualization","text":"The visualization is provided by MeshCat. MeshCat is a remotely-controllable 3D viewer, built on top of three.js. he MeshCat viewer runs in a browser and listens for geometry commands over WebSockets. This makes it easy to create a tree of objects and transformations by sending the appropriate commands over the websocket.","category":"page"},{"location":"visualization.html","page":"Visualization","title":"Visualization","text":"Julia bindings to the MeshCat WebGL viewer are still very basic but work for the most necessary applications. API Reference","category":"page"},{"location":"visualization.html","page":"Visualization","title":"Visualization","text":"The three.js webpage offers lots of examples and usefull tools like MeshPhongMaterial where you can test the appearance of different materials.","category":"page"},{"location":"visualization.html","page":"Visualization","title":"Visualization","text":"The visualisation can be used to display e.g. the current position, orientation, flap position, propeller thrust as well as a target position in the web browser http://localhost:8701.","category":"page"},{"location":"visualization.html","page":"Visualization","title":"Visualization","text":"(Image: VTOL with actuators) ","category":"page"},{"location":"visualization.html#Functions","page":"Visualization","title":"Functions","text":"","category":"section"},{"location":"visualization.html","page":"Visualization","title":"Visualization","text":"Modules = [Visualization]\nOrder   = [:function, :type]","category":"page"},{"location":"workflow/telegram_bot.html#Telegram-Bot","page":"Telegram Bot","title":"Telegram Bot","text":"","category":"section"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"A Telegram bot is used to receive mobile notifications.","category":"page"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"using Telegram, Telegram.API;\ntg = TelegramClient(\"5507705604:AAHiYwaiILMx7PjZ2canJdp8ApUOb4DWvQw\"; chat_id = \"27807904\");","category":"page"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"The flyonic telegram bot token is: 5507705604:AAHiYwaiILMx7PjZ2canJdp8ApUOb4DWvQw (Secret - do not share)","category":"page"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"The telegram chat ID is user specific. To find it out:","category":"page"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"open your Telegram app\nsearch for @RawDataBot\nwrite the bot /start\nthe bot will send you back your chat ID","category":"page"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"To send a message with Julia simply write:","category":"page"},{"location":"workflow/telegram_bot.html","page":"Telegram Bot","title":"Telegram Bot","text":"sendMessage(text = \"Your message\");","category":"page"},{"location":"hardware/installation.html#Ubuntu-fixed-IP","page":"Ubuntu configurations","title":"Ubuntu fixed IP","text":"","category":"section"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"configuration guide for fixed IP","category":"page"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"$ sudo nano /etc/netplan/*.yaml","category":"page"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"network:\n    renderer: networkd\n    ethernets:\n        enp1s0:\n            dhcp4: no\n            gateway4: 192.168.1.1\n            addresses: [192.168.1.22/24]\n            nameservers:\n                addresses: [192.168.1.1]\n    version: 2","category":"page"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"info: DHCP\nIf the UpBoard is operated in a different network, e.g. for configuration, the IP address can be received again from the DHCP server. For this purpose set dhcp4: yes","category":"page"},{"location":"hardware/installation.html#Ubuntu-serial-output-access-right","page":"Ubuntu configurations","title":"Ubuntu serial output access right","text":"","category":"section"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"The access rights to the serial interface must be set manually. Either once with: \n$ sudo chmod 666 /dev/ttyUSB0\n\nOr permanently by adding the user to the dialout group. (Changes take effect after restart)\n$ sudo usermod -a -G dialout $USER","category":"page"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"info: Serial Monitor (screen)\nIf a serial port is to be viewed e.g. via ssh, the tool $ screen can be used. how to monitor the serial port in linux.\n$ screen /dev/ttyUSB0 1000000\n$ screen $PORT $BAUDRATE\nto exit enter command mode by pressing CLTR+a Type :quit and press ENTER.\n","category":"page"},{"location":"hardware/installation.html","page":"Ubuntu configurations","title":"Ubuntu configurations","text":"info: List serial ports (julia)\nThe serial ports can be displayed with Julia.\njulia> using LibSerialPort;\njulia> list_ports()\n","category":"page"},{"location":"vtol_model.html#Frame-definition","page":"VTOL Model","title":"Frame definition","text":"","category":"section"},{"location":"vtol_model.html","page":"VTOL Model","title":"VTOL Model","text":" \n(Image: VTOL Frame) (Image: VTOL Orientation)\n(Image: VTOL Prop) (Image: VTOL angle of attack)\n(Image: World Frame) ","category":"page"},{"location":"vtol_model.html","page":"VTOL Model","title":"VTOL Model","text":"info: Body Frame\nBody always refers to the CoM. Not the position of the IMU, the GPS or the aerodynamic pressure point.","category":"page"},{"location":"vtol_model.html#Functions","page":"VTOL Model","title":"Functions","text":"","category":"section"},{"location":"vtol_model.html","page":"VTOL Model","title":"VTOL Model","text":"VtolModel.vtol_model(v_B, actions, param)\nVtolModel.aerodynamic_torque_model(v_B, actions, angle_of_attack, airspeed, param)\nVtolModel.propeller_torque_model(actions, param)\nVtolModel.aerodynamic_force_model(actions, aoa, airspeed, param)\nVtolModel.aerodynamic_force_model_wing_surface(actions, aoa, airspeed, param, lateral_airspeed)\nVtolModel.propeller_force_model(actions)","category":"page"},{"location":"quick_start.html#Quickstart-guide","page":"Quickstart guide","title":"Quickstart guide","text":"","category":"section"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"Download Julia (v1.8.2) I recommend to check for new versions!\nFor headless machines also download the current version from the website. apt-get may provide an old version.\n$ sudo apt install wget\n$ wget https://julialang-s3.julialang.org/bin/linux/x64/1.8/julia-1.8.2-linux-x86_64.tar.gz\n$ tar -xvzf julia-1.8.2-linux-x86_64.tar.gz","category":"page"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"Install Julia  Instructions for Official Binaries\nFor Windows follow the installation instructions.\nFor Mac, copy Julia into your application folder.\nFor Linux, extract the folder and copy it to /opt \n$ sudo cp -r julia-1.8.2 /opt/\nand create a symbolic link to julia inside the /usr/local/bin folder:\n$ sudo ln -s /opt/julia-1.8.2/bin/julia /usr/local/bin/julia\nOpen Julia\nFor Windows by clicking on the new program icon on your desktop or where you specified it in the installation. Or add the Julia path to your environment variables\nFor Mac, by clicking on the new program icon.\nType julia in a new terminal.\nA Julia terminal should open. To test, enter e.g. sqrt(9). \nPress ctrl + D if you want to close it again.","category":"page"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"info: access rights\nThe repository is currently not public. The next steps can only be done after I have given you access rights. For this I need your GitHub name (https://github.com/\"name\" leads to your account). My email address finn.sueberkrueb@tum.de.","category":"page"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"$ git clone https://github.com/Finn-Sueberkrueb/flyonic.git or with $ git clone git@github.com:Finn-Sueberkrueb/flyonic.git\n$ cd flyonic\n$ julia\njulia> ] to open the Julia package manager.\n(@v1.8) pkg> activate . The environment should be changed from (@v1.7) pkg> to (Flyonic) pkg> \n(Flyonic) pkg> instantiate This will take some time","category":"page"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"in case there is a problem with electron follow...","category":"page"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"Press ctrl + c to exit package manager\nFinally, we run the example that learns in the drone environment with julia>  include(\"src/examples/reinforcement_learning.jl\"). With include the content of the file is inserted into the current REPL (read-eval-print loop \"the current terminal session\") and thus executed. Keep in mind that all includes are now contained in the current REPL. If you want to start fresh press ctrl + D to end the current REPL and start a new one with $ Julia.\nNow the environment should start in the browser and the drone should start learning. This can also take a little longer the first time, since the entire code must be compiled. It's your turn. There are also Jupiter notebooks in the example folder.","category":"page"},{"location":"quick_start.html#Optional","page":"Quickstart guide","title":"Optional","text":"","category":"section"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"To use the Jupiter notebooks in the example folder, iJulia must be installed in addition to Jupiter Notebook. To do this, go to the package manager in Julia again with ] and write add iJulia. Now Jupiter Notebook should be able to run the Julia examples.","category":"page"},{"location":"quick_start.html","page":"Quickstart guide","title":"Quickstart guide","text":"Depending on your personal taste, you can setup your favorite IDE. I recommend Visual Studio Code with the Julia extension. But of course you can also choose from many other options Vim, Jupyter Notebook, Pluto Notebook, Atom, ...","category":"page"},{"location":"unittest.html#Unittests","page":"Unittest","title":"Unittests","text":"","category":"section"},{"location":"unittest.html","page":"Unittest","title":"Unittest","text":"A few simple tests for aero dynamics are available.","category":"page"},{"location":"unittest.html","page":"Unittest","title":"Unittest","text":"warning: Create workflow\nEstablish a workflow for how tests are written, documented and automated.","category":"page"},{"location":"workflow/terminal_commands.html#Useful-terminal-commands","page":"Useful terminal commands","title":"Useful terminal commands","text":"","category":"section"},{"location":"workflow/terminal_commands.html","page":"Useful terminal commands","title":"Useful terminal commands","text":"Execute with nohup in the background","category":"page"},{"location":"workflow/terminal_commands.html","page":"Useful terminal commands","title":"Useful terminal commands","text":"$ nohup YOUR COMMAND &","category":"page"},{"location":"workflow/terminal_commands.html","page":"Useful terminal commands","title":"Useful terminal commands","text":"??? SSH Key add SSH key to ~/.ssh/config file IdentityFile ~/.ssh/githubfinn","category":"page"},{"location":"rigid_body.html#Rigid-Body-Integration","page":"Rigid Body","title":"Rigid Body Integration","text":"","category":"section"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"RigidBodyDynamics Docu","category":"page"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"There are two options for rigid body simulation rigid_body_sim_simple and rigid_body_simulation_step. As well as a simple function vtol_add_wind to add the wind speed to the relative drone speed.","category":"page"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"warning: Do not use RigidBodyDynamics\nRigidBodyDynamics.jl is not automatically differentiated and will eventually be deleted from the repository.","category":"page"},{"location":"rigid_body.html#Examples","page":"Rigid Body","title":"Examples","text":"","category":"section"},{"location":"rigid_body.html#[rigid_body_simple](@ref-Main.RigidBodies.rigid_body_simple)","page":"Rigid Body","title":"rigid_body_simple","text":"","category":"section"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"include(\"../Flyonic.jl\");\nusing .Flyonic;\nusing LinearAlgebra\nusing Rotations;\nusing LoopThrottle;\n\n# Inizialise Visual Representation\ncreate_visualization();\ncreate_VTOL(\"vtol\");\n\n# initialise drone position\nx_W = [0.0; 0.0; 0.0];\nv_B = [0.0; 0.0; 0.0];\nR_W = [0.0  0.0  1.0;\n       0.0 -1.0  0.0;\n       1.0  0.0  0.0];\nω_B = [0.0; 0.0; 0.0];\n\n# Set the global wind\nwind_speed = 0.0;\nwind_direction_W = [0.0;0.0;0.0];\n\n# start, stop and step time\nt = 0.0             \nfinal_time = 2.0\nΔt = 1e-3;\n\n# @throttle is used to run the simulation in wall time when the dynamics simulation is faster.\n@throttle t while t < final_time\n    \n    # Get the next actions from somewhere. Here it is a fixes action\n    action = [10.0, 10.0, -0.035, -0.035]\n\n    # caluclate wind impact\n    v_in_wind_B = vtol_add_wind(v_B, R_W, wind_speed, wind_direction_W)\n    \n    # caluclate aerodynamic forces\n    torque_B, force_B = vtol_model(v_in_wind_B, action, vtol_parameters);\n        \n    # set the next forces for the rigid body simulation\n    x_W, v_B, R_W, ω_B, t = rigid_body_simple(torque_B, force_B, x_W, v_B, R_W, ω_B, t, Δt, vtol_body_inertia_B, vtol_body_mass)\n    \n    # set Visualisation\n    set_transform(\"vtol\", x_W,QuatRotation(R_W));\nend","category":"page"},{"location":"rigid_body.html#[rigid_body_simulation_step](@ref-Main.RigidBodies.rigid_body_simulation_step)","page":"Rigid Body","title":"rigid_body_simulation_step","text":"","category":"section"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"This example is reduced. And describes only the extra pieces that are needed for the RigidBodyDynamics.jl package.","category":"page"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"# Setting the rigid body simulation\nmechanism_state, vtol_joint = init_RigidBody(x_W, v_B, R_W, ω_B, vtol_body_inertia_B, vtol_body_mass);\nintegrator, storage = init_integrator(mechanism_state);\n\n# Visualize initial state\nx_W, v_B, R_W, ω_B = get_current_state(mechanism_state, vtol_joint);\nset_transform(\"vtol\", x_W,QuatRotation(R_W)); # Visualisation must be initialised beforehand.\n\n# Can always be called to reset state\nreset_mechanism_state!(mechanism_state, vtol_joint, x_W, v_B, R_W, ω_B);\n\nwhile t < final_time\n        \n\n    # caluclate aerodynamic forces\n    vtol_torque_B, vtol_force_B = vtol_model(v_B, action, vtol_parameters);\n\n    # set the next forces for the rigid body simulation\n    set_next_torque_force!(vtol_torque_B, vtol_force_B)\n        \n    # integrate rigid body dynamics for Δt\n    x_W, v_B, R_W, ω_B, time = rigid_body_simulation_step(integrator, t, Δt, storage)\n        \n    # Visualize the new state\n    set_transform(\"vtol\", x_W,QuatRotation(R_W));\n\n    t += Δt\nend","category":"page"},{"location":"rigid_body.html#Functions","page":"Rigid Body","title":"Functions","text":"","category":"section"},{"location":"rigid_body.html","page":"Rigid Body","title":"Rigid Body","text":"Modules = [RigidBodies]\nOrder   = [:function, :type]","category":"page"},{"location":"related_work.html#Related-Work","page":"Related Work","title":"Related Work","text":"","category":"section"},{"location":"related_work.html","page":"Related Work","title":"Related Work","text":"@show orange @show apple","category":"page"},{"location":"related_work.html","page":"Related Work","title":"Related Work","text":"info: Bibtex\nThere is a Bibtex connection for the docu tool.","category":"page"},{"location":"hardware/iron_bird.html#IRON-Bird","page":"IRON bird quickstart","title":"IRON Bird","text":"","category":"section"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"The Iron Bird can be used for hardware in the loop testing. It consists of a Pixhawk 4, a board for the power electronics, two motors, two servos, a GPS receiver and optionally a remote control and an UpBoard.","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"(Image: VTOL ream)","category":"page"},{"location":"hardware/iron_bird.html#Quickstart","page":"IRON bird quickstart","title":"Quickstart","text":"","category":"section"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"Install the PX4 Toolchain\nClone the Elektra Solar PX4 (Version 1.11). For external control use branch feature/ext_control. ","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"$ git clone git@bitbucket.org:elektrateam/px4-autopilot.git --recursive","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"Manually use the correct commit hash to check out the submodules in the appropriate version (detached head). The commit hashes are displayed in the repro. Special care with the Sub-Submodule PX4-OpticalFlow in the Sumbodule PX4-SITL_gazebo. ","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"update submodule libuavcan with ","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"$ git submodule update --init","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"Try to Build the code","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"$ make px4_sitl gazebo","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"Install QGroundControl (Linux: You can add a Launcher to start the AppImage from the dash)\nConnect the IRON Bird via Micro USB to the QGroundControl computer. ","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"(Image: pixhawk4)","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"QGroundControl should detect the Pixhawk 4 directly.","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"(Image: QGroundControl)","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"Load the parameter file inorder to use QGroundcontrol via USB while arming (e.g. sets parameter CBRKUSBCHK to 197848 )","category":"page"},{"location":"hardware/iron_bird.html#Remote-Control","page":"IRON bird quickstart","title":"Remote Control","text":"","category":"section"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"The remote control can be connected directly to the PPM RC connector on the Pixhawk 4. In addition, a power supply via USB is required. (Image: Remote Control)","category":"page"},{"location":"hardware/iron_bird.html","page":"IRON bird quickstart","title":"IRON bird quickstart","text":"Arming the Drone with the RC use the Arming Gesture.","category":"page"},{"location":"VtolOptimization.html#Various-optimisation-functions-for-the-VTOL-drone","page":"-","title":"Various optimisation functions for the VTOL drone","text":"","category":"section"},{"location":"px4_utils.html#PX4-Utils","page":"Px4 Utils","title":"PX4 Utils","text":"","category":"section"},{"location":"px4_utils.html#Functions","page":"Px4 Utils","title":"Functions","text":"","category":"section"},{"location":"px4_utils.html","page":"Px4 Utils","title":"Px4 Utils","text":"Modules = [Px4Utils]\nOrder   = [:function, :type]","category":"page"},{"location":"hardware/hardware.html#Hardware","page":"overview","title":"Hardware","text":"","category":"section"},{"location":"hardware/hardware.html#WLAN-settings","page":"overview","title":"WLAN settings","text":"","category":"section"},{"location":"hardware/hardware.html","page":"overview","title":"overview","text":"info: default settings\nThese settings were initially defined. Since many experiments run with a different setup, they are only to be considered as default.","category":"page"},{"location":"hardware/hardware.html","page":"overview","title":"overview","text":"Fritzbox: IP-Adresse: 192.168.1.1 Subnetzmaske: 255.255.255.0 DHCP-Server: aktiviert von: 192.168.1.20 bis: 192.168.1.200","category":"page"},{"location":"hardware/hardware.html","page":"overview","title":"overview","text":"static ip addresses","category":"page"},{"location":"hardware/hardware.html","page":"overview","title":"overview","text":"DariosJet: 192.168.1.21\nUp: 192.168.1.22\nSven-Rechner: 192.168.1.70\nUbiquiti Rocket: 192.168.1.80\nUbiquiti Bullet: 192.168.1.81\nPassword (WLAN & GUI): ElektraSolar\nWLAN-SSID: iVTOL\nMyFRITZ!\nberthold.baeuml@th-deg.de\nElektraSolar","category":"page"},{"location":"hardware/hardware.html#Elektra-VTOL2-(red)","page":"overview","title":"Elektra VTOL2 (red)","text":"","category":"section"},{"location":"hardware/hardware.html","page":"overview","title":"overview","text":"(Image: VTOL ream)","category":"page"},{"location":"hardware/hardware.html#Elektra-VTOL-(white)","page":"overview","title":"Elektra VTOL (white)","text":"","category":"section"},{"location":"hardware/hardware.html","page":"overview","title":"overview","text":"(Image: VTOL ream)","category":"page"},{"location":"global_controller.html#Global-Controller","page":"ETH Controller","title":"Global Controller","text":"","category":"section"},{"location":"global_controller.html","page":"ETH Controller","title":"ETH Controller","text":"Paper - A global controller for flying wing tailsitter vehicles","category":"page"},{"location":"global_controller.html","page":"ETH Controller","title":"ETH Controller","text":"VTOL - Hardware","category":"page"},{"location":"global_controller.html","page":"ETH Controller","title":"ETH Controller","text":"first VTOL Video, second VTOL Video","category":"page"},{"location":"global_controller.html","page":"ETH Controller","title":"ETH Controller","text":"Implementation only suitable for small attitude errors because of the attitude controller.","category":"page"},{"location":"global_controller.html","page":"ETH Controller","title":"ETH Controller","text":"warning: only small attitude errors\nThe Attidtue controller presented in the paper is not fully implemented, instead only an approximation for small deviations was used.bmω_des^mathcalB  - frac1τ_α bmn_err σ_err","category":"page"},{"location":"hardware/vtol3_brett.html#Elektra-VTOL3-(Brett)","page":"VTOL3 Brett","title":"Elektra VTOL3 (Brett)","text":"","category":"section"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"Mass Height Wingspan Flap height Flap width Actuators Thrust\n2.285 kg 0.48 m 0.9 m 0.135 m 0.42 m 2 Servo, 2 BLDC 4 kg","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"The following data was obtained by bifilar pendulum testing on 02.10.2022. Rotation damping torque tau_d depending on the angular velocity ω.","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"Damping calculation: tau_d = sign(ω) * (ω^2) * Damping","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"Axis Inertia Damping\nX 0.09841 0.00957\nY 0.04561 0.01616\nZ 0.07320 0.03822","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":" \n(Image: VTOL Frame) (Image: Flap direction)\n(Image: PX4 setup) ","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"danger: e-ID Drohne\nAuf der VTOL 3 Drohne (Brett) ist keine e-ID, sondern eine persönliche Identifikationsnummer eines EU-Kompetenznachweises für Fernpiloten angebracht (vermutlich von sven.schmid@elektra-uas.de)! Die e-ID hat ivian.kuscheff@th-deg.de. Diese sollte irgendwann auch auf der Drohne angebracht werden.","category":"page"},{"location":"hardware/vtol3_brett.html#Hardware-components","page":"VTOL3 Brett","title":"Hardware components","text":"","category":"section"},{"location":"hardware/vtol3_brett.html#RFD868x","page":"VTOL3 Brett","title":"RFD868x","text":"","category":"section"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"Used to send telemetry data to QGroundControl.","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"Can also be used to operate the UART communication wirelessly. e.g. if you do not want to execute the calculation on the UpBoard but on another computer. RFD900xPeer-to-peerV3UserManual_V1.3.pdf To configure the radio bridge there is a software tool (Windows). QGroundControl works with the factory settings","category":"page"},{"location":"hardware/vtol3_brett.html#Propeller-13x4.7SF","page":"VTOL3 Brett","title":"Propeller 13x4.7SF","text":"","category":"section"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"APC Propellers","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":" inches mm\nPitch 4.7 119.38\nPropeller Diameter 13 330.2","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"Propeller_13x47SF.dat","category":"page"},{"location":"hardware/vtol3_brett.html#Electronic-speed-control-ESC","page":"VTOL3 Brett","title":"Electronic speed control - ESC","text":"","category":"section"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"DJI 3S - 4S LiPo 30A Opto Brushless ESC","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"danger: calibration\nThese ESCs have an internal calibration. The hope is that both are calibrated the same. This is not known but there is nothing to indicate that it is not the case.","category":"page"},{"location":"hardware/vtol3_brett.html#Motor-Rctimer-5010-620KV","page":"VTOL3 Brett","title":"Motor - Rctimer 5010 620KV","text":"","category":"section"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"KV(rpm/v): 620","category":"page"},{"location":"hardware/vtol3_brett.html","page":"VTOL3 Brett","title":"VTOL3 Brett","text":"rctimer","category":"page"},{"location":"examples.html#Examples","page":"Examples","title":"Examples","text":"","category":"section"},{"location":"examples.html#velocity_GlobalControll.ipynb","page":"Examples","title":"velocity_GlobalControll.ipynb","text":"","category":"section"},{"location":"examples.html","page":"Examples","title":"Examples","text":"A simple example showing the interface to the drone model and the rigid body dynamic. The controller used is the one presented by Robin Ritz and Raffaello D’Andrea in paper \"A global controller for flying wing tailsitter vehicles\" in 2017. The controller is not suitable for large attitude deviations. Since it is not fully implemented.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"<div class=\"container\" style=\"width: 100%; height: 0; padding-bottom: 56.25%;\">\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/-ZuRPlvRdDM\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\" allowfullscreen></iframe>\n</div>","category":"page"},{"location":"examples.html#reinforcement_learning.ipynb","page":"Examples","title":"reinforcement_learning.ipynb","text":"","category":"section"},{"location":"examples.html","page":"Examples","title":"Examples","text":"Shows an example of how the environment can be used for learning. A constant thrust is set and both flaps are controlled identically. The drone should stay in the air as long as possible. The code is taken from the JuliaRLBasicDQNCartPole experiment.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"The Julia Reinforcement Learning package is used to achieve fast results. A good introduction can be found here.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"There is reinforcement_learning_simple_mechanics.ipynb and reinforcement_learning.ipynb. ","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"<div class=\"container\" style=\"width: 100%; height: 0; padding-bottom: 56.25%;\">\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/mU562NhUQcQ\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\" allowfullscreen></iframe>\n</div>","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"VTOL learning curve. (Image: learning curve)","category":"page"},{"location":"examples.html#d_optimization_problem.ipynb","page":"Examples","title":"2d_optimization_problem.ipynb","text":"","category":"section"},{"location":"examples.html","page":"Examples","title":"Examples","text":"This example contains a reduced 2-dimensional optimisation problem on which the loss landscape of the VTOL model can be viewed. It can also be used to try out different loss functions.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"Zygote is used to calculate a gradient. The gradient is used to find a minimum by conjugate gradient descent.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"A fixed setting for thrust and flaps was set for the entire duration of 0.2 s. The aim was to keep the drone as motionless as possible at the start position and to find the best parameters (thrust and flaps) for this. For this purpose, the deviation of the position, speed, rotation speed and orientation from the target values was used as loss. The actuators values were also taken into account.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"(Image: 2D optimization loss landscape)","category":"page"},{"location":"examples.html#model_predictive_control.ipynb","page":"Examples","title":"model_predictive_control.ipynb","text":"","category":"section"},{"location":"examples.html","page":"Examples","title":"Examples","text":"Model Predictive Control Example","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"It is applied from support point to support point. The controller is about 10 times slower than real time.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"<div class=\"container\" style=\"width: 100%; height: 0; padding-bottom: 56.25%;\">\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/iceSWRD9V78\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\" allowfullscreen></iframe>\n</div>","category":"page"},{"location":"examples.html#trajectory_optimization.ipynb","page":"Examples","title":"trajectory_optimization.ipynb","text":"","category":"section"},{"location":"examples.html","page":"Examples","title":"Examples","text":"A starting and an ending state is given. In between, the actuator inputs are optimised using a loss function and a conjugate gradient method.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"Loss Function","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"loss += norm(x_W - x_W_desired)*10.0\nloss += norm(v_B - v_B_desired) \nloss += norm(ω_B - ω_B_desired)/100.0\n    \nrotation_error = transpose(R_W) * R_W_desired\nrot_ang = 3.0 - rotation_error[1,1] - rotation_error[2,2] - rotation_error[3,3]\nloss += max(0.0, rot_ang)*2.0","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"Optimisation for 300 time steps.","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":" * Status: success\n\n * Candidate solution\n    Final objective value:     3.444486e+00\n\n * Found with\n    Algorithm:     Conjugate Gradient\n\n * Convergence measures\n    |x - x'|               = 0.00e+00 ≤ 0.0e+00\n    |x - x'|/|x'|          = 0.00e+00 ≤ 0.0e+00\n    |f(x) - f(x')|         = 0.00e+00 ≤ 0.0e+00\n    |f(x) - f(x')|/|f(x')| = 0.00e+00 ≤ 0.0e+00\n    |g(x)|                 = 2.40e+02 ≰ 1.0e-08\n\n * Work counters\n    Seconds run:   30  (vs limit 800)\n    Iterations:    175\n    f(x) calls:    406\n    ∇f(x) calls:   264","category":"page"},{"location":"examples.html","page":"Examples","title":"Examples","text":"<div class=\"container\" style=\"width: 100%; height: 0; padding-bottom: 56.25%;\">\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/QDeZBX-MfSI\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\" allowfullscreen></iframe>\n</div>","category":"page"},{"location":"hardware/microcomputer.html#Microcomputer","page":"Microcomputer","title":"Microcomputer","text":"","category":"section"},{"location":"hardware/microcomputer.html#UP-Board","page":"Microcomputer","title":"UP Board","text":"","category":"section"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"Part number: UP-CHT01-A20-0464-A11","category":"page"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"Intel Atom x5-Z8350 (4 Core 1.92 GHz)\n4 GB RAM\n64 GB eMMC\n5 V 13 Watt\n0°C Minimum Operating Temperature \n85.6 x 56.5 mm and 176.081 g","category":"page"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"Ubuntu 20.04 LTS","category":"page"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"PREEMPT-RT Kernel","category":"page"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"Username Password Comment\nupuser uppass DLR Thomas (Has set up the board)\nnsepp nsepp Nicolas Seppich\njulia julia Finn Süberkrüb","category":"page"},{"location":"hardware/microcomputer.html#Raspberry-Pi","page":"Microcomputer","title":"Raspberry Pi","text":"","category":"section"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"Raspberry Pi 4 Model B Rev 1.4","category":"page"},{"location":"hardware/microcomputer.html","page":"Microcomputer","title":"Microcomputer","text":"Username Password Comment\npi raspberry Default","category":"page"},{"location":"hardware/microcomputer.html#","page":"Microcomputer","title":"","text":"","category":"section"},{"location":"index.html#Flyonic","page":"Flyonic","title":"Flyonic","text":"","category":"section"},{"location":"index.html","page":"Flyonic","title":"Flyonic","text":"An environment for VTOL drone experiments. The environment contains VTOL models, controllers, visualizations and intelligent algorithms that adapt the cognitive abilities from birds to future drones. The focus is on developing modern controls that operate the aerodynamic limits of the aircraft and push their performance beyond the current limits.","category":"page"},{"location":"index.html","page":"Flyonic","title":"Flyonic","text":" \n(Image: VTOL sim) (Image: VTOL ream)","category":"page"},{"location":"index.html","page":"Flyonic","title":"Flyonic","text":"info: under construction\nIf there are any issues I appreciate feedback. finn.sueberkrueb@flyonic.de Here is the documentation regarding the documenter.jl.","category":"page"},{"location":"index.html#Units","page":"Flyonic","title":"Units","text":"","category":"section"},{"location":"index.html","page":"Flyonic","title":"Flyonic","text":" \nmps meter per second\nm meter\ns seconds\nN newton\nNm newton meter\nm^2 square meter","category":"page"},{"location":"index.html#Index","page":"Flyonic","title":"Index","text":"","category":"section"},{"location":"index.html","page":"Flyonic","title":"Flyonic","text":"","category":"page"},{"location":"hardware/px4_ext_control.html#PX4-External-Controll-Modifications","page":"PX4 customization","title":"PX4 External Controll Modifications","text":"","category":"section"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"To use PX4 as a fallback option and as an interface to the hardware, a minimal interface was built in which accesses the corresponding parts via a serial interface.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"Pixhawk 4 Serial Port Mapping","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"good Serial comunication example (Linux)","category":"page"},{"location":"hardware/px4_ext_control.html#Building-firmware","page":"PX4 customization","title":"Building firmware","text":"","category":"section"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"First try to build the firmware with","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"$ cd px4-autopilot\n$ make px4_fmu-v5_default","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"Than build and flash the firmware","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"$ make px4_fmu-v5_default upload","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"If you want to update the firmware of the second IO chip you have to rebuild everything.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"$ make clear\n$ make px4_fmu-v5_default upload","category":"page"},{"location":"hardware/px4_ext_control.html#PX4-Consoles/Shells-(Useful-for-debugging)","page":"PX4 customization","title":"PX4 Consoles/Shells (Useful for debugging)","text":"","category":"section"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"The PX4 Console can be reached through QGroundControl. ","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"QGroundControl -> Analyze Tools -> MAVLink Console","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"Test if the actuatorextcontrol topic is running","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"nsh> uorb top -1 actuator_ext_control ","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"nsh> listener actuator_ext_control","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"Use PX4_INFO(\"Some info...\"); or PX4_ERR(\"Print int (%i)\", int) in the PX4 code running on the FMU to output messages. The messages can also be read via the MAVLink console with the nsh> dmesg command.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"(Image: MAVLink Console)","category":"page"},{"location":"hardware/px4_ext_control.html#Pixhawk-4-(hardware)-and-PX4-(software)","page":"PX4 customization","title":"Pixhawk 4 (hardware) & PX4 (software)","text":"","category":"section"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"The Pixhawk 4 is a working flight controller. We use it as a fallback option to have a working drone as a starting point. At the same time, there is a lot of uncommented, and difficult to understand code.","category":"page"},{"location":"hardware/px4_ext_control.html#Our-customization","page":"PX4 customization","title":"Our customization","text":"","category":"section"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"The working branch on the elektra-solar Bitbucket is ext_control.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"(Image: Two processors)","category":"page"},{"location":"hardware/px4_ext_control.html#Two-processors","page":"PX4 customization","title":"Two processors","text":"","category":"section"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"The Pixhawk4 has two processors. The FMU (Flight management unit) and the IO (Input Output) processor. The actuators are normally driven by the IO processor. ","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"info: AUX PWM usage\nWe operate the actuators at the \"AUX\" PWM outputs which are directly driven by the FMU.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"(Image: Two processors)","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"Theoretically, in order to output external PWM signals via the IO processor, the data would have to be routed as follows: This procedure have not been tested. It is only a guess.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"Data arrive at the FMU via a serial interface (in our case UART2 / TELEM1).\nAn customized module (in our case extcontrol) accepts the serial communication and writes the PWM values into a uORB topic (in our case actuatorext_control.msg).\nThe px4io driver subscribes to the topic and generates a suitable serial message from it.\nThe message is sent from the FMU to the IO processor via the serial interface (UART8).","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"The IO processor runs its own firmware which can be found in the PX4 repository under src/modules/px4iofirmware. Even if the firmware is located at the modules folder it is NOT a module! It can not access the uORB messages. The whole communication on the IO processor runs over register.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"px4iofirmware/serial.c accepts the communication and stores the corresponding PWM message in an extra register. The register must previously be defined in px4iofirmware/registers.c.\npx4iofirmware/mixer.cpp must now detect whether the external PWM signals are to be used (Best via a flag which has to be defined in px4iofirmware/protocol.h) and then pass them to the function uppwmservo_set(). Furthermore all other calls of this function must be suppressed.","category":"page"},{"location":"hardware/px4_ext_control.html","page":"PX4 customization","title":"PX4 customization","text":"info: IO chip latency\nThe IO chip (MAIN pins) adds about 5.4 ms latency compared to using the AUX pins (this does not apply to a Pixracer or Omnibus F4, but does apply to a Pixhawk). To avoid the IO delay, disable SYSUSEIO and attach the motors to the AUX pins instead. source\n\nFor the Electra Solar parameter file:\nSYSUSEIO: IO PWM Disable\\  TRIG_MODE: Disable ","category":"page"},{"location":"workflow/executing_remotely.html#Execute-Julia-script-from-the-command-line","page":"Remote execution","title":"Execute Julia script from the command line","text":"","category":"section"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"Find out which Julia installation you have.","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"$ which julia\n> /usr/local/bin/julia","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"Compile and run programme with four threads","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"$ /usr/local/bin/julia --threads=4 ./src/examples/your_script.jl","category":"page"},{"location":"workflow/executing_remotely.html#Or-use-[tmux](https://tmuxguide.readthedocs.io/en/latest/tmux/tmux.html)-to-run-in-the-background","page":"Remote execution","title":"Or use tmux to run in the background","text":"","category":"section"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"start tmux","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"$ tmux new -s vtol","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"detached-session","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"ctr - b\nd","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"attach the detached-session","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"$ tmux a -t vtol","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"vertical split windos","category":"page"},{"location":"workflow/executing_remotely.html","page":"Remote execution","title":"Remote execution","text":"ctrl - b\n%","category":"page"}]
}
