<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · Flyonic</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.png" alt="Flyonic logo"/><img class="docs-dark-only" src="assets/logo-dark.png" alt="Flyonic logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Flyonic</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Flyonic</a></li><li><a class="tocitem" href="quick_start.html">Quickstart guide</a></li><li class="is-active"><a class="tocitem" href="examples.html">Examples</a><ul class="internal"><li><a class="tocitem" href="#velocity_GlobalControll.ipynb"><span>velocity_GlobalControll.ipynb</span></a></li><li><a class="tocitem" href="#reinforcement_learning.ipynb"><span>reinforcement_learning.ipynb</span></a></li><li><a class="tocitem" href="#d_optimization_problem.ipynb"><span>2d_optimization_problem.ipynb</span></a></li><li><a class="tocitem" href="#model_predictive_control.ipynb"><span>model_predictive_control.ipynb</span></a></li><li><a class="tocitem" href="#trajectory_optimization.ipynb"><span>trajectory_optimization.ipynb</span></a></li></ul></li><li><span class="tocitem">Julia Modules</span><ul><li><a class="tocitem" href="vtol_model.html">VTOL Model</a></li><li><a class="tocitem" href="global_controller.html">ETH Controller</a></li><li><a class="tocitem" href="rigid_body.html">Rigid Body</a></li><li><a class="tocitem" href="visualization.html">Visualization</a></li><li><a class="tocitem" href="px4_utils.html">Px4 Utils</a></li><li><a class="tocitem" href="vtol_parameter_optimisation.html">VTOL Model Parameter Optimisation</a></li></ul></li><li><a class="tocitem" href="unittest.html">Unittest</a></li><li><span class="tocitem">Hardware</span><ul><li><a class="tocitem" href="hardware/hardware.html">overview</a></li><li><a class="tocitem" href="hardware/iron_bird.html">IRON bird quickstart</a></li><li><a class="tocitem" href="hardware/installation.html">Ubuntu configurations</a></li><li><a class="tocitem" href="hardware/px4_ext_control.html">PX4 customization</a></li><li><a class="tocitem" href="hardware/vtol3_brett.html">VTOL3 Brett</a></li><li><a class="tocitem" href="hardware/microcomputer.html">Microcomputer</a></li></ul></li><li><span class="tocitem">Flight experiments</span><ul><li><a class="tocitem" href="experiments/airfields.html">Airfields</a></li><li><a class="tocitem" href="experiments/flight_laws.html">Flight laws DE</a></li></ul></li><li><a class="tocitem" href="related_work.html">Related Work</a></li><li><span class="tocitem">Workflow &amp; Commands</span><ul><li><a class="tocitem" href="workflow/executing_remotely.html">Remote execution</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="examples.html">Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="examples.html">Examples</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Finn-Sueberkrueb/flyonic/blob/main/docs/src/examples.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h1><h2 id="velocity_GlobalControll.ipynb"><a class="docs-heading-anchor" href="#velocity_GlobalControll.ipynb">velocity_GlobalControll.ipynb</a><a id="velocity_GlobalControll.ipynb-1"></a><a class="docs-heading-anchor-permalink" href="#velocity_GlobalControll.ipynb" title="Permalink"></a></h2><p>A simple example showing the interface to the drone model and the rigid body dynamic. The controller used is the one presented by Robin Ritz and Raffaello D’Andrea in paper &quot;<a href="https://www.flyingmachinearena.ethz.ch/wp-content/uploads/ritzIEEE17.pdf">A global controller for flying wing tailsitter vehicles</a>&quot; in 2017. The controller is not suitable for large attitude deviations. Since it is not fully implemented.</p><div class="container" style="width: 100%; height: 0; padding-bottom: 56.25%;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/-ZuRPlvRdDM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen></iframe>
</div><h2 id="reinforcement_learning.ipynb"><a class="docs-heading-anchor" href="#reinforcement_learning.ipynb">reinforcement_learning.ipynb</a><a id="reinforcement_learning.ipynb-1"></a><a class="docs-heading-anchor-permalink" href="#reinforcement_learning.ipynb" title="Permalink"></a></h2><p>Shows an example of how the environment can be used for learning. A constant thrust is set and both flaps are controlled identically. The drone should stay in the air as long as possible. The code is taken from the <a href="https://juliareinforcementlearning.org/docs/experiments/experiments/DQN/JuliaRL_BasicDQN_CartPole/#JuliaRL\\\\_BasicDQN\\\\_CartPole">JuliaRL<em>BasicDQN</em>CartPole experiment</a>.</p><p>The <a href="https://juliareinforcementlearning.org/docs/">Julia Reinforcement Learning</a> package is used to achieve fast results. A good introduction can be found <a href="https://juliareinforcementlearning.org/blog/an_introduction_to_reinforcement_learning_jl_design_implementations_thoughts/">here</a>.</p><p>There is <code>reinforcement_learning_simple_mechanics.ipynb</code> and <code>reinforcement_learning.ipynb</code>. </p><div class="container" style="width: 100%; height: 0; padding-bottom: 56.25%;">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/mU562NhUQcQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen></iframe>
</div><p>VTOL learning curve. <img src="../assets/examples/learning_curve.png" alt="learning curve"/></p><h2 id="d_optimization_problem.ipynb"><a class="docs-heading-anchor" href="#d_optimization_problem.ipynb">2d_optimization_problem.ipynb</a><a id="d_optimization_problem.ipynb-1"></a><a class="docs-heading-anchor-permalink" href="#d_optimization_problem.ipynb" title="Permalink"></a></h2><p>This example contains a reduced 2-dimensional optimisation problem on which the loss landscape of the VTOL model can be viewed. It can also be used to try out different loss functions.</p><p>Zygote is used to calculate a gradient. The gradient is used to find a minimum by conjugate gradient descent.</p><p>A fixed setting for thrust and flaps was set for the entire duration of 0.2 s. The aim was to keep the drone as motionless as possible at the start position and to find the best parameters (thrust and flaps) for this. For this purpose, the deviation of the position, speed, rotation speed and orientation from the target values was used as loss. The actuators values were also taken into account.</p><p><img src="../assets/examples/2d_optimization_problem.png" alt="2D optimization loss landscape"/></p><h2 id="model_predictive_control.ipynb"><a class="docs-heading-anchor" href="#model_predictive_control.ipynb">model_predictive_control.ipynb</a><a id="model_predictive_control.ipynb-1"></a><a class="docs-heading-anchor-permalink" href="#model_predictive_control.ipynb" title="Permalink"></a></h2><p>Model Predictive Control Example</p><p>It is applied from support point to support point. The controller is about 10 times slower than real time.</p><div class="container" style="width: 100%; height: 0; padding-bottom: 56.25%;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/iceSWRD9V78" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen></iframe>
</div><h2 id="trajectory_optimization.ipynb"><a class="docs-heading-anchor" href="#trajectory_optimization.ipynb">trajectory_optimization.ipynb</a><a id="trajectory_optimization.ipynb-1"></a><a class="docs-heading-anchor-permalink" href="#trajectory_optimization.ipynb" title="Permalink"></a></h2><p>A starting and an ending state is given. In between, the actuator inputs are optimised using a loss function and a conjugate gradient method.</p><p>Loss Function</p><pre><code class="language-julia hljs">loss += norm(x_W - x_W_desired)*10.0
loss += norm(v_B - v_B_desired) 
loss += norm(ω_B - ω_B_desired)/100.0
    
rotation_error = transpose(R_W) * R_W_desired
rot_ang = 3.0 - rotation_error[1,1] - rotation_error[2,2] - rotation_error[3,3]
loss += max(0.0, rot_ang)*2.0</code></pre><p>Optimisation for 300 time steps.</p><pre><code class="nohighlight hljs"> * Status: success

 * Candidate solution
    Final objective value:     3.444486e+00

 * Found with
    Algorithm:     Conjugate Gradient

 * Convergence measures
    |x - x&#39;|               = 0.00e+00 ≤ 0.0e+00
    |x - x&#39;|/|x&#39;|          = 0.00e+00 ≤ 0.0e+00
    |f(x) - f(x&#39;)|         = 0.00e+00 ≤ 0.0e+00
    |f(x) - f(x&#39;)|/|f(x&#39;)| = 0.00e+00 ≤ 0.0e+00
    |g(x)|                 = 2.40e+02 ≰ 1.0e-08

 * Work counters
    Seconds run:   30  (vs limit 800)
    Iterations:    175
    f(x) calls:    406
    ∇f(x) calls:   264</code></pre><div class="container" style="width: 100%; height: 0; padding-bottom: 56.25%;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/QDeZBX-MfSI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen></iframe>
</div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="quick_start.html">« Quickstart guide</a><a class="docs-footer-nextpage" href="vtol_model.html">VTOL Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 5 October 2022 14:28">Wednesday 5 October 2022</span>. Using Julia version 1.8.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
